<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="../build/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="../build/nv.d3.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body class='with-3d-shadow with-transitions'>
<!-- <button onclick="expandLegend();">Expand/Contract Legend</button> -->
    <!-- <script> -->
        <!-- var expandLegend = function() { -->
            <!-- var exp = chart.legend.expanded(); -->
            <!-- chart.legend.expanded(!exp); -->
            <!-- chart.update(); -->
        <!-- } -->
    <!-- </script> -->
<svg id="chart1" class='with-3d-shadow with-transitions'></svg>

<script>
    var histcatexplong = [
        {
            "key" : "NB" ,
			color: "#0192A6",
            "values" : [ [ 1462147200000, 589] , [ 1464739200000, 696] , [ 1467331200000, 778] , [ 1470009600000, 552] , [ 1472688000000, 752] , [ 1475280000000, 733] , [ 1477958400000, 560] , [ 1480550400000, 589] , [ 1483228800000, 518] , [ 1485907200000, 545] , [ 1488326400000, 497] , [ 1491004800000, 817] , [ 1493596800000, 637]]
        } ,
        {
            "key" : "A1" ,
			color: "#DA762B",
            "values" : [ [ 1462147200000, 729] ,[ 1464739200000, 763] , [ 1467331200000, 874] , [ 1470009600000, 739] , [ 1472688000000, 782] , [ 1475280000000, 659] , [ 1477958400000, 598] , [ 1480550400000, 670] , [ 1483228800000, 707] , [ 1485907200000, 630] , [ 1488326400000, 632] , [ 1491004800000, 890] , [ 1493596800000, 794]]
        } ,
        {
            "key" : "A2" ,
			disabled: true,
			color: "#9DA632",
            "values" : [ [ 1462147200000, 10509] ,[ 1464739200000, 10064] , [ 1467331200000, 11056] , [ 1470009600000, 10282] , [ 1472688000000, 11496] , [ 1475280000000, 10753] , [ 1477958400000, 9663] , [ 1480550400000, 9653] , [ 1483228800000, 9655] , [ 1485907200000, 9448] , [ 1488326400000, 8897] , [ 1491004800000, 12108] , [ 1493596800000, 10082]]
        } ,
        {
            "key" : "A3" ,
			disabled: true,
			color: "#B675C4",
            "values" : [ [ 1462147200000, 2231] ,[ 1464739200000, 2223] , [ 1467331200000, 2300] , [ 1470009600000, 2090] , [ 1472688000000, 2263] , [ 1475280000000, 2182] , [ 1477958400000, 2178] , [ 1480550400000, 1871] , [ 1483228800000, 1696] , [ 1485907200000, 1603] , [ 1488326400000, 1711] , [ 1491004800000, 2203] , [ 1493596800000, 2029]]
        } ,
        {
            "key" : "DM" ,
			color: "#C43E2D",
            "values" : [ [ 1462147200000, 195] ,[ 1464739200000, 192] , [ 1467331200000, 203] , [ 1470009600000, 177] , [ 1472688000000, 208] , [ 1475280000000, 188] , [ 1477958400000, 184] , [ 1480550400000, 222] , [ 1483228800000, 161] , [ 1485907200000, 187] , [ 1488326400000, 172] , [ 1491004800000, 186] , [ 1493596800000, 185]]
        }
    ];
    //var colors = d3.scale.category20();
    var chart;
    nv.addGraph(function() {
        chart = nv.models.stackedAreaChart()
            .useInteractiveGuideline(true)
            .x(function(d) { return d[0] })
            .y(function(d) { return d[1] })
            .controlLabels({stacked: "Stacked"})
            .duration(300);
        chart.xAxis.tickFormat(function(d) { return d3.time.format('%x')(new Date(d)) });
		var x = d3.time.scale();
		chart.xScale(x);
        chart.yAxis.tickFormat(d3.format(',d'));
		chart._options.controlOptions = ['Stacked', 'Expanded'];
        chart.legend.vers('furious');
	chart.margin({"right":40});
        d3.select('#chart1')
            .datum(histcatexplong)
            .transition().duration(1000)
            .call(chart)
            .each('start', function() {
                setTimeout(function() {
                    d3.selectAll('#chart1 *').each(function() {
                        if(this.__transition__)
                            this.__transition__.duration = 1;
                    })
                }, 0)
            });
        nv.utils.windowResize(chart.update);
        return chart;
    });
</script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="../build/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="../build/nv.d3.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body class='with-3d-shadow with-transitions'>
<!-- <button onclick="expandLegend();">Expand/Contract Legend</button> -->
    <!-- <script> -->
        <!-- var expandLegend = function() { -->
            <!-- var exp = chart.legend.expanded(); -->
            <!-- chart.legend.expanded(!exp); -->
            <!-- chart.update(); -->
        <!-- } -->
    <!-- </script> -->
<svg id="chart1" class='with-3d-shadow with-transitions'></svg>

<script>
    var histcatexplong = [
        {
            "key" : "CO" ,
			color: "#102634",
            "values" : [ [ 1462147200000, 371] , [ 1464739200000, 361] , [ 1467331200000, 420] , [ 1470009600000, 354] , [ 1472688000000, 430] , [ 1475280000000, 395] , [ 1477958400000, 383] , [ 1480550400000, 351] , [ 1483228800000, 413] , [ 1485907200000, 406] , [ 1488326400000, 379] , [ 1491004800000, 459] , [ 1493596800000, 373]]
        } ,
        {
            "key" : "TCO" ,
			color: "#769CB3",
            "values" : [ [ 1462147200000, 778] ,[ 1464739200000, 895] , [ 1467331200000, 954] , [ 1470009600000, 805] , [ 1472688000000, 1002] , [ 1475280000000, 952] , [ 1477958400000, 902] , [ 1480550400000, 860] , [ 1483228800000, 1029] , [ 1485907200000, 924] , [ 1488326400000, 856] , [ 1491004800000, 976] , [ 1493596800000, 873]]
        }
    ];
    //var colors = d3.scale.category20();
    var chart;
    nv.addGraph(function() {
        chart = nv.models.stackedAreaChart()
            .useInteractiveGuideline(true)
            .x(function(d) { return d[0] })
            .y(function(d) { return d[1] })
            .controlLabels({stacked: "Stacked"})
            .duration(300);
        chart.xAxis.tickFormat(function(d) { return d3.time.format('%x')(new Date(d)) });
		var x = d3.time.scale();
		chart.xScale(x);
        chart.yAxis.tickFormat(d3.format(',d'));
		chart._options.controlOptions = ['Stacked', 'Expanded'];
        chart.legend.vers('furious');
        d3.select('#chart1')
            .datum(histcatexplong)
            .transition().duration(1000)
            .call(chart)
            .each('start', function() {
                setTimeout(function() {
                    d3.selectAll('#chart1 *').each(function() {
                        if(this.__transition__)
                            this.__transition__.duration = 1;
                    })
                }, 0)
            });
        nv.utils.windowResize(chart.update);
        return chart;
    });
</script>
</body>
</html>
